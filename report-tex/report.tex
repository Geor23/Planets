\documentclass[11pt,a4paper]{article}
\usepackage[bmargin=0.5in,lmargin=0.5in,rmargin=0.5in]{geometry}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{amsfonts}
%\usepackage{xspace,xcolor}
%\usepackage[display]{texpower}
%\usepackage[screen,nopanel]{pdfscreen}
\usepackage{amsmath}
\usepackage{upgreek}
\usepackage{comment}
\usepackage[]{algorithm2e}
% http://en.wikibooks.org/wiki/LaTeX/Mathematics

% -------- For floor and ciel -------- %
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

% -------- For long divisions -------- %
\newcommand{\ldsym}{$\left.\mathstrut\right)$}% unbalanced )
\newlength{\ldwidth}

\newcommand{\longdivide}[2]% #1 = denominator, #2 = numerator
{\settowidth{\ldwidth}{\ldsym}
  $#1\,\raisebox{1.5pt}{\ldsym}\hspace*{-.65\ldwidth}\overline{
\mathstrut\hspace*{.35\ldwidth}\ #2}$}



\newcommand{\cfbox}[2]{%
    \colorlet{currentcolor}{.}%
    {\color{#1}%
    \setlength{\fboxsep}{3pt}
    \setlength{\fboxrule}{0.1em}
    \fbox{\parbox{\textwidth}{\color{currentcolor}#2}}}%
}


% ------------------------------------ %


\begin{document}

\vspace*{13mm}
\begin{center}
\rule[0.5ex]{\linewidth}{2pt}\vspace*{-\baselineskip}\vspace*{3.2pt}
\rule[0.5ex]{\linewidth}{1pt}\\[\baselineskip]
{\Huge Planetarius }\\[4mm]
{\Large \textit{COMS  30400: The Games Project}}\\
\rule[0.5ex]{\linewidth}{1pt}\vspace*{-\baselineskip}\vspace{3.2pt}
\rule[0.5ex]{\linewidth}{2pt}\\
\vspace{6.5mm}
{\large By}\\
\vspace{6.5mm}
{\large\textsc{{\Huge Static Peak} \\E. Christodoulou\\ T. Camp\\ G. Ginghina\\ J. O'Connor\\ T. Michiels\\ C. Mann}}\\
\vspace{11mm}
\includegraphics[scale=0.2]{logos/brislogo.png}\\
\vspace{6mm}
{\large Department of Computer Science\\
\textsc{University of Bristol}}\\
\vspace{11mm}
\begin{minipage}{10cm}
\end{minipage}\\
\vspace{9mm}
{\large\textsc{\today}}
\vspace{12mm}
\end{center}
\begin{flushright}
  Ele almost killed us all
\end{flushright}

\pagebreak
\tableofcontents

\pagebreak

\section{Abstract}

We introduce you to Planetarius. A multiplayer shooter where you choose to side either with the greedy Pirates, or the nefarious Super Corp. Throw yourself into battle, blasting your enemies with lasers to collect the precious resource known as Elefthismium. War wages over several planets, from the lush forest planet of Napa, the pirate homeworld desert planet of Erimos, to the SuperCorp homeworld city Polis. You can join over network with your friends and fight alongside or against them for supremacy. [1] \\ \\
Players use their mobiles to control their players using a twin stick system; one for movement and one for firing projectiles. The aim is to collect and retain as many resources from the planet as possible before the round timer has elapsed, upon which players are shown some statistics, and then taken to the next planet. The team with the most planets claimed are declared the dominators in the race for the resources. \\ \\
Players only use their devices to control their players so that all interactivity is directed to one, large screen upon which all players are visualised. This design choice was used primarily to maximise the enhancement that the Planetarium environment brings to the game. We have been gearing our development towards the Planetarium as it is a unique opportunity to showcase a new style of interaction and teamwork gameplay. \\ \\


\section{Novelty Component}

\noindent
 The novelty component in our game can be summarised simply as a full multiplayer game visualised inside a highly immersive Planetarium environment, where players engage in battle in a cartoon-like world. The @Bristol Planetarium does not have many fully interactive sessions to showcase, and in particular they have never had a large scale multiplayer game, which are the type of new shows they are eager to promote in the future. We believe we have filled this gap for them and could take this forward as the start of a full scale network infrastructure for interactivity in the dome. \\ \\

\noindent
 Developing a full network solution, which includes integrating with the Planetarium network has proved challenging both technically and collaboratively with the Planetarium staff. We have worked hard to ensure that all corners have been covered, and that players will enjoy and benefit the most from the unique environment the dome brings. Due to lack of time, we were unable to achieve 3D reliably, however detailed later in the report is a succinct explanation of how this could be added, with little effort.



\pagebreak







\section{Project Overview}

\subsection{Team Introduction: Static Peak} 
 We are a team of 6 Computer Scientists from with a wide skillset, from 3D modelling and graphics to game play or networking enthusiasts. We came together as people who like playing video games and were excited to get a glimpse into the gaming industry in order to create a unique game, whilst discovering a wide range of technologies we have not had the chance to work with before. We were eager to apply our computer science skills to the development of the game, to create something that is technically challenging as well as fun.

 \subsection{Game Concept}
  The concept of our game was to allow multiple players to easily connect and fly into a battlefield where all players are visualised on one large screen. The players fly around the surface of a planet to collect and retain precious resources, while defending themselves with projectiles. Players use their mobile devices to control their direction of movement and turret. After every round the team with most resources wins the planet. After several rounds the team with most planets claimed wins the game.

 \subsection{Tools used}

 \subsubsection{  Unity Game Engine}

 After researching the various open source game engines available to us we settled with Unity’s game engine, as it provided us with the tools we needed to achieve our vision of the game. Firstly is an established Game Engine, used by hundreds of thousand of people. Secondly, the engines portability was very important to us since we needed to easily transfer our game to Android, Windows and Linux. Also, prior to our team, other developers had successfully ported their projects to the Planetarium using Unity, so this further supported the justification of the engine. Unity's graphics engine's platform diversity can provide a shader with multiple variants and a declarative fallback specification, allowing Unity to detect the best variant for the current video hardware; and if none are compatible, fall back to an alternative shader that may sacrifice features for performance.

 \subsubsection{ Unity Cluster Renderer}
Unity Cluster Renderer is a beta feature of Unity that is used to perfectly synchronize two machines such that they display the exact same image. The system works by frame-locking objects in the game and manipulating objects based on timings, input and random seeds. We reached out to Unity in February to utilies this software as it would be useful for stereo vision. Once we recieved the software however, we found that it would not work with an existing network layer, and we could not use it. Nevertheless, it provided useful inside into how to implement the algorithm for 3D ourselves.

 \subsubsection{ Intel Next Unit of Computing (NUC)}
Considering the game was intended to be heavily network based, it made sense to make use of a dedicated server machine. We were provided an Intex NUC box that runs Ubuntu, and runs the Linux server component. The box simply runs an runs an access point that broadcasts an SSID (given as "Planetarium"). The box bridges wired and wireless and assumes that the wired component has access to a DHCP server. This was chosen so that we could run a network either in the Planetarium or simply next to our laptops.

\subsubsection{Oculus}

We were given an Oculus to simulate the fisheye screen present inside the planetarium. 

 \subsubsection{  Planetarium Facilities}
 A major part of our project involved the @Bristols 3D Planetarium, as one of our main goals was to investigate the 3D capability. The planetarium provided us with the opportunity to port our project to its 4K Dome, and further enhance its atmosphere and immerse the players in an environment that completely surrounds them. The planetarium also boasts complete surround sound on top of this. We had 4 our sessions every one or two weeks to test out our new ideas.

 \subsubsection{ Music Composers}
 The Faculty of Engineering cooperated with the Music Department of University of Bristol and after presenting our game ideas in front of them, we ended up co-operating with two excellent composers, Edward Brown and Matthew Jones. We proceeded with explaining our games universe and concept to them, in order to fully immerse them into our idea and the result was amazing. They provided us with some magnificent clips for our needs. Specifically, they composed clips for every different planet, the Pirate and Super Corp theme and  menu themes.


 \subsubsection{git}
 In order to keep track of our development and have a smooth collaboration, git has proved to be particularly useful, allowing for distributed revision control and source code management , as well as bug tracking, feature requests, task management. We have also utilised Git in order to make releases after achieving a milestone as well as providing a backup for when things go wrong. This has allowed for a scrum-based work managing, basing our development on sprints, often software integration and regular releases.


 \subsection{Oculus rift} 
 In order for an easier porting of our game onto the planetarium, we utilised VK2 Oculus Rift for development puposes. This has allowed us to....

 \subsection{Android and IoS devices} 
 As our game was aimed to be played on android and Ios devices, we did this by... the challenge this has brough can be resumed in....

 \subsection{Microsoft Game Controllers}
 - adapted our game so that it can also be played with controllers - this was done by... 


\pagebreak

 \section{Software Manual}

 \subsection{Running the Game}
 To run the game the individual must first have the server, observer and player executables. The server will run dedicated on a chosen device so that observers and players can connect to it. The observers (usually launched on Windows)  and players (usually on mobile devices, although can also run on windows) can enter the IP (if required) to connect to the correct machine running the dedicated server. \\ \\
 Ideally the individual will connect the observer first so that players can see their team choices updated as they choose a team on their personal devices. Once all the players have joined the observer can click launch at which point all devices transition into a running state and the game launches into round one. From this point the game requires no more management and plays out for 3 rounds.

 \subsection{Adding New Game Functionality}
 To add new functionality to the game it is ideal that the developer uses Unity Engine 5.4.3+ to be able to build for Windows, Android and Linux. The code for the game is separated into several folders relating to the game component required. For development related to gameplay flow the developer should first start by exploring the Start, Lobby and Round scenes. All scenes contain component scripts attached to objects which control the flow of the game. The scripts attached to these objects are descendants of MonoBehaviour which means they exist in the context of a scene and relate to an object in the scene.\\ \\
 To change more core aspects of the game such as networking or rounds, the user can navigate the folder structure which is separated by functionality, and then by purpose. For example there is a Network folder which contains many subfolders relating to player object synchronisation, socket connection information etc.

 Moreover, most of our features were implemented such that adding on would be a matter of simply inserting a new line of code. For example, the round system is based on having an array of all of the scenes we would want to play in order they must appear, calculating the transitions, round stats and gameplay would automatically be updated. Thus, in order to insert a new round/ a new planet, it would be a matter of adding the scene name into the array of scenes in the round manager and everything would work properly.

 -- clear code made it to be easy to be developed over as we did something that has not been done before and people might want to use it as a reference for further development!!! - rewrite this

 \subsection{Software Maintenance During Development}
 Software maintenance was achieved using git as source control and GitHub as the hosting medium. Throughout the project a new feature, fix, or experimental code would require a new branch on the remote medium. When the branch had fulfilled its original goal it would be reviewed by the team to ensure that all team members were up to date with the new changes on this branch. When the team was happy with the final changes the branch is then merged into the default development branch. When we were happy with the state of the development branch we would make a release to the master branch, which is the latest playable version of the game.

\pagebreak


 \section{Technical Content (10 pages max)}

 \textit{Choose some of the more interesting/challenging/novel aspects of the project to discuss in detail. Explain why they are technically interesting or challenging and discuss how the problems were overcome. A successful game will:
 Have several technically interesting challenges which have been overcome, and explained succinctly, including good software development.
 Be playable with little or no training - but have enough depth to satisfy an experienced gamer.
 Have come from a development team who have demonstrated a willingness to address problems in the team and have found solutions to them.
 Have a relevant look and feel (creative content creation) and be novel.}

 \subsection{Unity Preamble}
 It is useful to first introduce the way Unity handles objects to fully understand how problems have been solved throughout the project. 
 Every object in the game contains a Transform. A Transform simply contains \textbf{position}, \textbf{rotation} and \textbf{scale}, which are all 3-dimensional vectors. It is also possible to query the relative \textbf{up}, \textbf{right}, and \textbf{forward} direction vectors, used commonly in 3D graphics. \\ \\
\noindent
 The networking layer is easily explained as sending and receiving on channels. There are two main channels: reliable and unreliable. The reliable channel ensures that the packets reach their destination through acknowledgement protocols. The unreliable channel, as it sounds, does not guarantee that the packet arrives at the destination.
 

    \subsection{Planetarium Challenges}
     - How to visualise on the dome ? Technical information about the planetarium cameras, previous use of shaders etc.
     Since February we have been having frequent sessions in the Planetarium usually for 4 hours in the evening. The Planetarium houses two main systems for projecting images onto the dome; Digistar and Vioso. We were in charge of using the Vioso which uses two servers, Master and Slave. The purpose of having two servers is for the potential for 3D which the Vioso system achieves by simply overlaying the the dome projection from Master and Slave.
     The projected image comes from two 4k projectors placed at the front and rear of the dome, which blend along the middle to the dome to produce a single hemispherical environment. The images are accompanied by a 7.1 surround sound audio system providing a uniquely immersive experience for the audience.  \\ \\ 
     Projecting onto the planetarium was one of the major problems that the team had to solve. Two solutions were investigated, a simple shader with one camera, and a 5-camera setup. 
     With the simple shader, one camera is applied with a fisheye correction so that pixels are shifted according to the rotation and distance from the center of the eye. The difficulty with this approach is that along the sides of the eye there is a distortion effect as the camera in most cases only has a 60* field of view. Therefore we had to investigate another solution. \\ \\
     Through research into how others had solved the Fulldome (as it is known) view, we found one open source solution which uses 5 cameras, and projects each camera's viewports onto adjacent meshes, which stitch together to create a full fish-eye effect that has 240* field of view.
     One of our main challenge in porting the game onto the dome view was accounting for a different camera view all throughout the project, having to develop for 2 completely different views (dome and normal screen). Thus, in order to allow for an easy switch, we implemented both views into the same project, allowing for these to change using a toggle. This meant that every feature added had to account for both versions of the game. Moreover, it led to certain shaders and textures not being included in our game due to not being suitable on one of the views.
      \pagebreak
 \subsection{Networking challenges}
  
  \noindent

  One of the major challenges for us was making the game a fully networked game, allowing for many players to play together for their own mobile devices. We require for a fair amount of data to be sent and processed by both the servers as well as the player clients and observer clients. Movement, rotation, deaths, kills, scores and game updates all needed to be synchronised and updated for all players. We initially started by using the Unity Networking structures available to us, which allowed for us to establish the basic functionality for the game in good time. Once the basic plan layout had been established, we were able to test the game in a basic form, which was helpful in assessing the current gameplay and how to improve on it. \\

  We realised at this stage two things: firstly that we needed to focus more of the game on the observer view, and that the Unity Networking structures we'd used were far from optimal for our usage. We from here worked on replacing the Unity structures of our own, allowing us to create very specific networking functionality for our game with single message passes between only the required devices. By moving the a lot of the computation to the observer displays, we were able to reduce the amount of network traffic significantly. By making the players only visible on the observer view, we reduced the need for all clients to recieve constant updates as to player actions, only needing for the observer to be updated with these changes. Everything besides deaths could then be dealt with on the observers, be it interactions with resources, events, or scores. Even events which seemingly would require some network traffic, such as the rotation of player objects, was with some thought and mathematics able to be purely calculated on the observer. \\

  The network uses a star topology. The dedicated server is essential to ensure that data from all clients is acknowledged on a fair basis, which may not be the case if running in parallel with graphics. In addition, it allows for a smooth transition into 3D in the planetarium, as the server can fairly estimate network latency. There are two main scripts that enable synchronizing the position and rotation of objects between server and clients. In our final design, all clients send their positions to the server after some threshold has passed, and the server passes these on to the observing clients. \\

  old:  - Smooth gameplay, ensuring packets are fast but reliable for stereo. We designed scripts that allow the networked objects to be easily synchronized
  With networking being one of the pillars of gameplay we had many discussions relating to how we should solve the networking problem. Early on we decided that we would use Unity’s built in networking layer which allows for easy communication passing from server to clients. Unity provides built in layers for the type of communication decide: reliable and unreliable.
  On a hardware level, we are using an Intel NUC box as a Linux server. The dedicated server is essential to ensure that data from all clients is acknowledged on a fair basis, which may not be the case if running in parallel with graphics. In addition, it allows for a smooth transition into 3D in the planetarium, as the server can fairly estimate network latency (stereo is explained in depth in later paragraph).
  There are two main scripts that enable synchronizing the position and rotation of objects between server and clients .In our final design, all clients send their positions and rotations after some threshold value has been passed to the server, and the server passes these on to the observing clients. In terms of topology it can be seen that the general flow of network traffic travels in the direction of the observer screens.
  

  \subsubsection{Stereo Algorithm (3D)}

  The algorithm for stereo visualisation of the game is actually very simple. It is partly inspired by the Unity Cluster Renderer technique and the network solution we had already implemented. \\
  Updates which are sent to the observer occur over a network where there is no guarantee of when they will they will arrive, of course we expect that they will take far less than say, $1$ second, but another level of execution locking is required to fully synchronize the state of two observers. \\ \\
  This is achieved through pairing position updates with a forecast time, and packet ID at which the observer should execute the actual position update. Initially, the forecast time should be well in advance, but rapidly decrease as the observers receive more updates. This is achieved by the observers sending an acknowledgement response to the server, detailing the \textbf{actual} time at which they received the update, as opposed to the forecast time. The server then uses these responses to build a model of the network latency, and adjust the forecast time appropriately to maximize responsiveness in gameplay.

  \SetKwProg{Fn}{def}{}{end}
  \SetKwFunction{Fgcd}{stereoMyButthole}
  \begin{algorithm}[H]
    \LinesNumbered
    \Fn(\tcc*[h]{compute gcd}){\Fgcd{a,b}}{
      \eIf{$a \equiv 0 \pmod b$}{
        \Return b
      }{
        \Return \Fgcd{$b$, $a \pmod b$}
      }
    }
  \end{algorithm}

  \pagebreak
  \subsection{Screen views}


   \subsubsection{Local view and Observer view}

   Our first implementation of the game involved having two separate views, a local one for each player which would be focused on the local avatar and a separate view for an observer, which would be ported on a large screen or the @Bristol Planetarium. However, during testing we encountered several issues with this implementation. \\ \\
   Firstly, we noticed that the player focused more on their own screen rather than on the larger battlefield view that we provided on the observer screen. In order to tackle this, we decided to remove the field of view of the player from the mobile phones and keep the data we display to a minimum. The only data visualised on the player’s device over the duration of a game, is their unique ID with their selected team colour and twin stick controller. Additonally, in between round players are able to see their personal scores on the device and can observe their total team stats on the Observer monitor. \\ \\
   This change was very important to maximize the use of the Planetarium screen in particular, as there is a massive range of space to utilize, and to justify its use in general. A follow on point from this is to consider how we visualised the state of the game onto the large screen. 
   Secondly, as the game took place in space on a planet, the dome view would only be able to see one side of the planet. Hence, if the players would move to the other side, they could not be visualised. It is of course important to ensure that all players are visualised on the planet, but also to allow players to explore parts of the world by themselves and not feel like the game is a closed grid. \\ \\  
   Two main ideas were experimented with; a split screen version of the game which displayed both sides of the planet, and one single screen version. In the final product, we decided on the single screen view for ease of play.
   \subsubsection{Split screen} 
   
   The split screen view consisted of two cameras that display one half of the planet each. The interesting aspect of this view is that the controls must be consistent when transitioning from one side of the planet to the other. So that for example, when a player moves off from the top right of the left view, they appear moving in the respective direction, from the bottom left of the right view. This meant that the right view image must be inverted in the horizontal axis. A result of this inversion means that while the players will move in a consistent direction across the views, their controls will now be reflected in the axis upon which they crossed into the other view. \\ \\
   Therefore, we introduce the notion of the joystick adjustment matrix $J_{adj}$, which is multiplied with the normalized joystick vector $J$ to correct the direction in which a player should move. When a player crossed the boundary from one view to another, another reflection $R$ is applied to the joystick adjustment matrix. 
  \begin{equation}
     J=\begin{bmatrix}
         X & Y
        \end{bmatrix}^{T}
        \qquad
          R(\theta) = 
          \begin{bmatrix}
          \cos {2\theta} & \sin {2\theta} \\
          \sin {2\theta} & -\cos {2\theta}
          \end{bmatrix}
      \qquad
      J_{adj} = \prod_{\theta \in crossings}R({\theta})
  \end{equation}
  \begin{align*}
    J_{new} = J_{adj}J
  \end{align*}
  This method worked well for seeing the entire planet on one screen however through testing we found that the concept was difficult to grasp given that the transition occurs on a spherical shape. Therefore we required a more simple option.

\pagebreak
   \subsubsection{Single Screen}
    In the single screen view all players are enforced to stay within the the view of one camera, which displays one half of the planet. This is achieved by constraining the player position to be within the distance between the camera and the centre of the planet. The camera is positioned at twice the radius of the planet, while always facing the centre of the planet. To determine where the camera should move, the average position of the players is calculated, and the camera object is rotated to face this point. This rotation is then synchronized occasionally with all players to ensure that they cannot move out from the field of view. \\ \\

    The single screen allows for a gameplay-flow effect where players of the opposing teams can push to explore different areas of the planet in search for resources and power ups. The only time where the view would be locked is when equal amounts of players are pushing against opposite ends of the camera view on the planet, which is unlikely given that the objective is to maintain and steal resources from the opposing teams.

     \pagebreak
     \subsection{GamePlay design challenges}
      - camera views, single, split etc. How should players move? Why twin stick, how is that implemented. Lots of design discussion with regards to the visualisation on the observer, what should be shown on the player screens etc.
      TWIN STICK and orientation on planet
       - Ensuring movement is consistent
       When considering the method of interaction on the client side, many factors had to be taken into consideration. Firstly, we had to ensure the that the game is easy to pick up. To achieve this, a virtual twin stick controller was implemented. The twin stick is the most widely used control method in modern games, so this means that people could intuitively understand how to control their avatar without a lengthy explanation. The left stick is responsible for the player movement and the right for the turret rotation and shooting mechanic. 
       Each “stick” of the user interface is responsible for controlling an axis. These axes are used to provide continuous input, resulting in smooth player navigation in the game space without any need to remove their hands of their device. The axes themselves are simply a normalized 2-dimensional vector representing direction in which the joystick is being dragged.
       One very important aspect of the user controls is ensuring that they are always consistent regardless of rotation in the observer view, i.e that up always moves the player up and similarly for the other directions. We achieve this by sending occasional updates of the observer rotation to the clients so that they can move respective to the up-vector of the observer object. The positions of the players are then sent to the server after threshold distance has been exceeded, and following this the server relays the information to the observers.

       \pagebreak
       \subsection{Graphics and interface}
       Look and feel all created by ourselves to be cartoony.
        Can also appeal to the nature of the planetarium for shows where there may be lots of children, commercial aspect etc.

        An important design decision that had to be taken early in the project's development was the direction that graphics should take. There were two directions that the project could take in regards to that. Either take a more photo-realistic approach or a more “cartoony” one. In order to reach a decision all the affected factors were taken into consideration. A primary concern was the fact that the game had to perform well on the Planetarium Dome, and for the result to be as smooth as possible the polygon count had to be kept at an optimal level. Using photo-realism and with the amount of players the project was aiming for could cause serious rendering and synchronization issues.
        Another variable that took an integral in the decision was the fact that in case that the planetarium was interested in keeping the game as an extra “attraction” the game would be suitable for kids visiting.


        The graphics are of a game are integral to the user experience. Thus, the decision to keep graphics simple and almost ‘cartoony’ was made early on in the design process. This was preferred over realistic graphics, and used bold outlines with cel-shading to achieve the effect. There were multiple factors to consider when making this choice. The first of which was the fact we were developing for the Planetarium. We were quickly given a rough polygon count by the Planetarium (of around 4,000,000), which gave us more reason to go for simpler models and textures. Couple this with the fact that our game is large-scale and multiplayer, the effect that having high-polygon, realistic models and very high resolution textures would have on performance would be compounded. The Planetarium also made clear that if the game was a success, they would be interested in taking it on as a regular event. Thus, the Planetarium’s standard demographic had to be taken into account, which includes young children. This made cartoon-ish graphics stand out as the preferred choice.  

        The design of our models were also heavily influenced by the two factions in the game. The first two ship models were created before the two teams were decided {insert photo here}. However, after the two factions in our game, pirates and super-corp were set, we re-designed the two ship models. For the super-corp we were aiming for sleek, hidraulic,... almost simplistic design, whereas the pirates needed to inspire a more rough, ...feeling. The two colour schemes utilised to distinguish between the teams, blue and red, were chosen for the same reason. 

        Deciding upon the two factions in our game also led to changes in planets. For example, as the city planet was aimed to be the home of the super-corp, the planet was designed to inspire just that, by creating hude buildings....For the same reason we designed a sand/tumour planet, the home of the pirates, where we included elements such as....

        The colour scheme for the UI was chosen whilst taking into account the two teams. Thus, we chose a neutral colour, we felt that turqoise would be a good fit as it would be different from the team's colours as well as stand out and give a "spacey" feel to the interface.


        \subsection{Music}
        Additionally, the music was also inspired by our decision of the two factions, ...


        \subsection{Easy playability vs. Depth}
        We feel we have achieved both, being playable with little or no training, as well as portray enough depth such that an experienced gamer would the drawn into the game. As each player controls his/hers avatar utilising a simple twin-stick controller, this makes it extremelly easy to pick up. In order for players to be eased into the game, we decided that our first planet would portray no extra features, just resources to be picked up. However, as we go further into the game, in order to draw the player into the game we add on extra features, such as meteors hitting the planet randomly on the second round or even portals that would teleport players randomly on the last planet. As well as adding onto the gameplay in order to keep the energy levels up (wtf am i talkin about), an experienced gamer could also see the strategy into the team game play. For example, as the game is built to happen as an arena style game, where players can drag the view as they move, as one player from the pirates team follows a super-corp to try and kill him, another pirate can move in the opposite direction in order to drag the view with him, making the super-corp captured, as it would be unable to move in its original direction. 





\pagebreak



        \section{Project Planning}

        \subsection{Initial Goal Planned}

        For organisational purposes, we set some milestones that needed to be accomplished by various points during the year so that work could proceed smoothly: \\ \\

        \textbf{Getting to know Unity:} No one in our team was particularly experienced with game development, for the purpose we scheduled a twelve hour coding session in order to familiarize ourselves with the game engine that we were going to use in order to develop our game.
        Git learning sessions: as well as learning how to use Unity, as there were members of our team that were not that familiar with Github, we set a session that would enhance everyone’s skills in using this tool.
        Basic single player implementation: After going through some tutorials related to our game concept we made our first step of our games creation, by implementing a simple single player demo where you are just an sphere, moving around on a square and shooting smaller spheres. \\ \\

        \textbf{Research networking:} The next step was to make our first attempt at turning the existing single player demo into a multiplayer one. We researched ports, IP address assignment. \\ \\
        Debugging: Debugging was mostly something that we would all the time, in order to ensure that the game is working properly, however we also organized some dedicated debugging sessions as well in order to make sure that the game is not barely just working, but it functions optimally under different conditions, for example, in the hands of inexperienced users. \\ \\
        Benchmarking: Since our game is supposed to be played over a network, it means that at all times all the clients must be synchronized with the current game state, receive their teams updates, as well as the enemy one. 
        However, even though our initial plan was roughly followed, based on scrum methodologies, the feature planning process was revised often, after each release and testing session, in order to provide the best gameplay for our game. Admittedly, on each working session we would plan out the day, which proved to be a good way to manage tasks.

        \subsection{Initial Implementation}
        At first the game was just a single sphere running around a much larger sphere collecting spheres. It was a very simple game, if you could call it that, that primarily served as an introduction to game development. This allowed for additions such as a twin-stick controller to control the avatar, and later on, networking, in order to account for multiple players playing in the same session.

        \subsection{Networking and Players}
        Expanding from a single player experience to a multiplayer was the largest problem that we had to solve. The main obstacle being that once a resource has to be shared over the network, many new variables had to be taken into consideration.

        \subsection{Planetarium and Testing}
        Porting the game to the planetarium was a unique and thoroughly interesting experience. The Planetarium houses two projectors that project different parts of the image onto the hemisphere. The main challenge was scaling the game's interface and objects so that they are suitable for the Dome as well as make some texture changes to the objects to ensure that they still retain a a good level of detail in 4K.

        \subsection{Gameplay Revisions}
        First of all, our planets gained a more detailed texture with every passing session, we felt that they needed to be as diverse and memorable as possible. We wrote some backstory as to why each planet is important to the game's lore and universe. \\ \\ 
        Following, we have the way players interact with each other and with their game environment. Our initial game concept was merely a multiplayer game, running on android devices, where each player would choose a team and just blow up the members of the enemy team. Our vision for the game has come a long way since then, we introduced back story to our teams, gave them a reason to fight. Then we realised that the idea of just destroying spaceships is not a real novelty. In order to expand our games scope we introduced Resources, an in game item so important to the survival of each teams and their plans, that are worth fighting and dying over them. \\ \\
        Going back to planets, after re texturing them, we felt that they felt boring and plain, even with more details provided. In order to resolve this issue we introduced the concept of Environmental Hazards. These are features that make each planet even more unique and add an extra layer of gameplay complexity to users playstyle. For example, one of our planets is surrounded by an asteroid field, however the catch is that asteroids every now and then are “detached” from their belt and proceed to a collision course with the planet, the player may not want to be in its range when it collides.

        \section{Team Process (max 4 Pages)}
        
        \subsection{Team Members and Roles}
        Our group is consisted of 6 members. In order to optimise our groups performance we tried to exploit the strengths of each of our member and assign them the most suitable role in the team. 
        Project Manager
        First we had to assign a Project Manager, a person that is organized and be able to organize the rest of the group. Easy to communicate with and be able to relay information between the various people that our team had to cooperate with and the rest members of the team. 
        Lead Programmer
        Then, we had to appoint someone to be the teams Lead Programmer. A person that his/her knowledge of software and hardware would allow him to help them rest of the team with any difficulties they were to face over the games development cycle. We also appointed people which were good in more art related subjects responsible for the graphical part of the project.
        Gameplay Supervisor
        Appointed someone for supervising the gameplay development, in order to make some decisions regarding how the game should evolve to ensure the players enjoyment. 
        The group was splitted in various combinations depending on the tasks at hand. If design of textures and models was needed then, Georgiana and Jamie would take the task of developing them and the rest of the team would focus on integration of the models in the game. Likewise, if a task was related to the networking part of the project, then Callum and Thomas C. would take focus on that and the rest of the team would focus on making sure the existing system would be able to adapt to the new network configurations, else make changes accordingly.
         
        \subsection{The Good Moments}
        First term everything went smoothly. We had quite good communication and the milestones we were setting to complete were done in time. No good Moments , just tolerable


        \subsection{The Improveable Moments}
        Thankfully, after being in a group project in year 2, everybody had been taught some very important lessons regarding working in a group, so a lot of possible mistakes were avoided.
        However, as deadlines for different modules started piling up, various members of our team couldn't work on the project as much as they wanted. And we did experience some periods when the team just couldn't focus on the game's development, either due to exams or to coursework deadlines coming up.
        At the first development stages, with the project deadline being some time away, there was no particular pressure on the team, and everything was proceeding at a more lax state. This might not have worked to our advantage as we could have made use of that time, to make even further progress.  


        \subsection{Knowledge Gained Through Collaborative Teamwork}
        Communication in large scale projects is one of the most important columns that keep a team standing. Quickly realised that, we had to be constantly updated with the project's development as most of our systems functionality is interconnected, hence a small change made onto one aspect of the system could potentially break some functionality relying on it. 
        Used Trello, a site where we posted the next implementations scheduled for the project as well as who was responsible for each of them. That way we all made sure that knew what needed to be done, as well as whom we were to collaborate in case our jobs were either similar or related.
        Another very important aspect of working in a team is that you should always keep an eye on your team members. Make sure that you pay attention on how they are doing. If they cannot accomplish their given task help them, pair up with them so that they can better work and not struggle needlessly. Also, in case they do not seem okay, show your team that you care more than just the project.
         
        Organization is everything, all team members must have a task at any point, so that progress, however small must always be made. 

        They wanna hear : teamwork, communication, organisation ?!


        \subsection{Given A Second Chance We Would Change ...}
        Start exploring each others strengths and weaknesses, so that we know how to better distribute the work around the team. Try to put more strict deadlines in regards to content so that we could have better understanding of how long it would take to develop some functionalities. 
        Also try communicate more often with the team members, especially the ones assigned a high priority task, in order to make sure that everything is up to schedule and in case a difficulty comes up remedy the situation as soon as possible.

        \subsection{Methods Employed To Assist Collaborative Development}
        Slack was used, an application specifically designed for team communication, which allowed as to directly get a hold of anyone in the team, post something important as well as add alerts for whenever a new Trello card was added, or modified, and whenever a new meeting was scheduled. \\ \\
        Organised weekly meetings to discuss and work together, as well as monthly or bi-monthly 12h working session depending on the workload, where we would not only work together but also discuss what has worked and what hasn’t in terms of organisation. All meetings were scheduled long in advance so everyone could organise their work on other units and were added onto the Google calendar so everyone would receive reminders the day before a meeting as well as on the day.
        At the beginning of the meetings we would plan out the day as well as the workload until the next meeting and all tasks would be added onto Trello, a task management tool that allowed us to keep up to date with that needs to be done, what is in progress and what has already been accomplished, as well as assign team members for the tasks and set deadlines.
        Additionally, as Git was utilised, all members were notified whenever a new contribution was added to the project so they could code review. This way, everyone was up to date with the latest project updates even if working remotely. 
        During the holidays, as most members were away, we had meetings utilising Google Hangouts to discuss progress and plan out the next development period. 

        \pagebreak

        \subsection{Contributions}
        \subsubsection{Georgiana Ginghina - Project Manager }
        \begin{itemize}
          \item As a team manager I dealt with group communication and organisation:
          \begin{itemize}
            \item Made sure there were regular meeting and work sessions where everyone would catch up and work together.
            \item Communication with any external factions and make sure everyone is informed.
          \end{itemize}
          \item I worked on graphics and UI :
          \begin{itemize}
            \item Made the two initial ship models, as well as the final pirate ship model once we set a theme for the game
            \item Made models for resources, as well as various planet enhancements, such as palm trees for the sand planet, a basic low-poly tree for the maze planet, buildings for the city planet.
            \item Made the aesthetics for the final version of the UI, involving menu, animations and button responsiveness and timer visualisation. 
          \end{itemize}
          \item I worked on game play and networking communication:
          \begin{itemize}
            \item I created a team manager that would keep stats for each team such as scores, players etc.
            \item I created a kill feed.
            \item Wrote the round manager with Elle which deals with changing the rounds when a timer would run out as well as keeping and resetting round stats.
            \item Made the communication between the team manager and round manager employed on the server and the clients.
          \end{itemize}
          \item I worked on the observer view onto the planetarium:
          \begin{itemize}
            \item After experimenting with different views onto the planetarium, I built the final view which would work as an arena, players only being able to access one half of the planet and also being able to move the view/ the arena towards them.
          \end{itemize}
          \item I worked on identification for players:
          \begin{itemize}
          \item Made players be assigned a unique id, visualised in a tear-drop pin style onto the observer screen.
          \item Made players be able to tap on their id-pin on their mobile devices and that would trigger an animation of their pin enlarging and shrinking on the observer view.
          \item Added the original basic music system.
          \end{itemize}
        \end{itemize}

        \pagebreak

        \subsubsection{Callum Mann - Lead Programmer}
        \begin{itemize}
        \item As Lead Programmer I put effort into making sure all members of the team had tasks and that everyone was familiar with how their parts will integrate into the projects:
        \begin{itemize}
        \item Providing project structure and guidance, the importance of good API’s etc.
        \item Supporting other team members with their code and source control processes
        \item Reviewing code on GitHub thoroughly
        \end{itemize}
        \item I made large contributions to the networking component including:
        \begin{itemize}
        \item Simulating the planetarium network and bridging wired to wireless
        \item Setting up and maintaining the access point
        \item Setting up the dedicated server 
        \item Fixing coma-inducing bugs relating to the synchronization of player objects
        \end{itemize}
        \item I worked on the player experience:
        \begin{itemize}
        \item Ensure that controls correctly map from user device to observer screen, i.e so that up is always up regardless of screen rotations
        \item Tweaked the joysticks so that they are more usable on different devices
        \item Experimented with split screen view and single screen view
        \end{itemize}
        \item I integrated the 5 Camera system into the project so that objects in the game world are correctly drawn inside the Planetarium
        \item I worked on some UI screens related to the Observer
        \item I modelled some parts of a Planet in Unity.
        \end{itemize}







        \subsubsection{Tom Michiels}

        \begin{itemize}
          \item Was responsible for implementing a user friendly way for the user to interact with the game. Came up with a twin stick model, one stick for controlling your spaceship and the other for controlling the spaceships turret and fire.
          \item Worked on Player and Lobby UI
          \item Worked on the player movement and old camera system
        \end{itemize}

        \pagebreak

        \subsubsection{Thomas Camp}

        \begin{itemize}
          \item My first task was to establish a basis for the networked game which could be easily used by the rest of the team. The initial creation made use of many of unity’s pre-existing network structures, which ensured for an easy to use basis for testing the game at an early stage. This largely consisted of making an operating server-client layout, allowing for the synchronisation of movement, rotation and scores.

          \item The game required more complex networking changes as we progressed however, such as having to have all interaction checks done on observers rather than on the respective local clients for each player. This required a lot of the code to be done using only single message passes due to Unity lacking any inherent capabilities to deal with such a situation.

          \item In addition we wished to make the game able to run with as many players as possible, which required us to try and reduce the network traffic as much as possible. This resulted in a re-work of the network system we had in place to only include the specific messages we required for our game, taking a step away from the pre-existing Unity networking solution. To ensure the changes were easily used we also sorted everything into easily-used managers for the various networked portions of the game, allowing for the members of our team less focused on the networking aspects to still be able to use it with ease.

          \item Beyond the networking aspects I also worked on the backend structures for scores, players and rounds, also working on ensuring these structures are correctly populated and used throughout the game.

          \item I also looked into 3d solutions along with Callum, testing Cluster Rendering as a solution for a period until unfortunately coming to the conclusion it was not fit for our needs of a networked synchronised game. We looked into other solutions to the issue of synchronisation for 3d, and eventually settled on an algorithm to be implemented. Unfortunately this did not get implemented in the final release.
        \end{itemize}

        \subsubsection{James O’ Connor}

        \begin{itemize}
          \item Designed the SuperCorp ship model on Autodesk Maya. 
          \item Made the sand planet texture, as well as the power-up pickup models. 
          \item Made the skybox. 
          \item Wrote some of the code for projectile firing, resource networking, respawning after death, visualizing the resources and scores, as well as the players gaining points for picking up resources.
        \end{itemize}

        \pagebreak
        \subsubsection{Eleftherios Christodoulou}

        \begin{itemize}
          \item Feedback on the development of the game and helped evolve its gameplay.
           
          \item Helped create the initial Player Controller, which included how the player behaves inside the game environment as well as how it shoots.  

          \item Created a script, responsible for managing the different resources around the planet. Namely it controlled the behaviour of power ups, resource pickups as well as planet hazards, like meteors. The script is responsible for keeping the planets populated by resources and power ups at any given time during the round. It keeps track of their current numbers and keep them in between the desired levels. The script is also responsible for spawning the players as soon as the game starts.

          \item Play tested the game in order to ensure the best experience for the player. This included, regulating the number of power ups and resources around the planets as well as the power up “life span”. Meaning the amount of time before a power up stops functioning as well as the rate that a resource increases in value. Made sure that no round would ever lead to a draw as the system takes into consideration variables like team score, kills and deaths.

          \item Created a manager responsible for managing the music scores for each part of the game. Assigned the corresponding audio clip to each round, manu and team of our game. The script provides the user with basic controls over the clips. The user can freely play and stop the different audio clips of an instance, as well as, regulate their individual volume.

          \item Wrote different scripts and functions for providing the User Interface with useful information regarding the game. Created a script for visualising the results of every round as well as the final results for the game. 

          \item Worked on resolving a series of issues that our game had. Fixed a bug where in case the mobile device was not held horizontally when initializing the game it would immediately minimize. Resolved an issue, where when a player gor destroyed, the observer was also destroyed. Resolved by adding a check to see whether the collision was local or not.
        \end{itemize}

\pagebreak
        \section{Appendix A}

        BackStory - (Clean up this)

        Our game is set in a universe where Earth is no more. Years of fighting have finally rendered the planet inhospitable so the humankind had to abandon its birthplace and look for other planets to call home. And so, the last survivors of the human race, boarder large spaceships and began an age long trip into the nothingness of space in search for new planets. \\\\
        While cruising the vastness of the Milky Way a wormhole sucked the remnants of humanity into a new galaxy, which the named Elpis, in hope that there lied their hope for the future. But as always, humanity could not stay united for much longer, so the populace was split into factions. We have Super Corp, the large organization responsible for the construction of the spaceships that transported the rest of human race off Earth. They declared that since they provided the means for the humans to escape, the human kind should forever praise them as Gods and do as they command. This unexpected and forced employment contract caused an uproar amongst the people and soon after this declaration some brave space pilots took it upon themselves to oppose the might of the Corporation. \\\\

        Being originally pilots under contract of the Corporation they one day took off with their spaceships and made a colony in the far reaches of space, away from the clutches of the Corporation. Their goal was to become a thorn to the Corporation, which soon branded them as terrorists and Pirates, and they were going to accomplish that by stealing their valuable resources which they put people to work like slaves to extract them and make people see the true face of Super Corp. Their idea is that more and more people would join their cause and one day Super Corp might find its end.
        \\ \\

        That was 20 years ago, the Pirates have more than enough power to challenge Super Corp, but have gotten drunk with power and might. They became corrupted by their unlimited freedom in the galaxy. The lines between good and bad, light and darkness are fading away and all that remains its just War.








\end{document}
